{% extends "Store/base.html" %}

{% block css %}
{% load static%}
<link href="https://ssl.dotpay.pl/test_payment/widget/payment_widget.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static 'Store/css/display_cart.css' %}">
{% endblock css%}


{% block body %}

<script id="dotpay-payment-script" src="https://ssl.dotpay.pl/test_payment/widget/payment_widget.js"></script>

  Akceptuję 
  <a href="https://ssl.dotpay.pl/files/regulamin_dotpay_sa_doko nywania_wplat_w_serwisie_dotpay.pdf" target="_blank" title="regulamin płatności">
    Regulamin płatności
  </a> oraz 
  <a href="https://www.dotpay.pl/polityka-plikow-cookies/" target="_blank" title="polityka cookies">
    politykę cookies
  </a> Dotpay Sp. z o.o..


Przyjmuję do wiadomości, że w celu realizacji procesu płatności Administratorem moich danych osobowych jest Dotpay sp. z o.o.. (KRS 0000296790), 30-552 Kraków (Polska), Wielicka 72, +48126882600, <a href="mailto:bok@dotpay.pl">bok@dotpay.pl</a>, zobacz <a title="regulamin" target="_blank" href="https://ssl.dotpay.pl/t2/cloudfs1/magellan_media/rod o">pełną treść klauzuli informacyjnej</a>.


<form action="{{ url }}"  method="post">
  
  {{ dotpay_form }}
  <input type="submit" value="Przejdź do płatności"/>
</form>

<div class="cart-container">

    <div class="items">
        <div class="cart-item-preview">
          <span>.</span>
          <span>Tytuł</span>
          <span>Typ</span>
          <span>Ilość</span>
          <span>Cena</span>
          <span>Cena całkowita</span>
        </div>
        {% for item in items %}
           <div class="cart-item-preview">
                <img class="cover-image-cart" src="{{ item.book.cover_photo.url }}"></i>
                <div class="book-info">
                    <p>{{ item.book.title }}</p>
                    <p> {% for author in item.book.authors.all %}
                        {{ author.first_name}}
                        {% endfor %}
                    </p>
                  </div>
                  <p>{{ item.book_type }}</p>
                
                    <span class="quantity">{{ item.quantity }}</span>
                    <span class="price">{{ item.price }}</span>
                    {% load multiply_tag %}
                    <span class="total-item-price">{%  multiply item.quantity item.price %}</span>
            </div> 
         {% endfor %}  
    </div>
     
     
    
</div>


{% endblock body %}


{% block javascript %}

<script type="text/javascript">
    let dotpayWidgetConfig = { 
      sellerAccountId: '790190',
      amount: '100.00',
      currency: 'PLN',
      lang: 'pl',
      widgetFormContainerClass: 'my-form-widget-container',
      channelsWrapperContainerClass: 'my-channels-wrapper',
      widgetClass: 'my-widget-class',
      selectedWidgets: ['formWidget'],
      offlineChannel: 'mark',
      offlineChannelTooltip: true,
      debug: true
    }
</script>

<script>
  const selectedElement  = document.querySelector("#selected");
  console.log(selectedElement) 
  
</script>

{% endblock javascript %}