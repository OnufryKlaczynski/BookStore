{% extends "Store/base.html" %}

{% block css %}
{% load static%}
<link rel="stylesheet" type="text/css" href="{% static 'Store/css/book_detail.css' %}"> 
{% endblock css%}


{% block body %}
    <div class="book-container">
        <img class="book-cover" src="{{book.cover_photo.url }}"/>
        
        <div class="book-info">
            <h1 class="title">{{book.title }}</h1>
            {% for author in book.authors.all %}
                <p class="author">{{ author }}</p>
            {% endfor %}
            <p class="category">{{book.category}}</p>
            <div class="tags">
                {% for tag in book.tags.all %}
                    <a class="tag" href="{% url 'Store:tags' %}?tag={{tag.text}}">#{{tag}}</a>
                {% endfor %}
            </div>
        </div>
        <div class="shop-info">
            {% if book.ebook %}
            <div class="ebook">
                ebook
                {{ book.ebook.price}}
            </div>
            {% endif %}
            {% if book.audio_book%}
            <div class="audio-book">
                audiobook
                {{ book.audio_book.price}}
            </div>
            {% endif %}
            {% if book.paper_book %}
            <div class="paper-book">
                Okładka {{book.paper_book.cover }}
                {{book.paper_book.price }}
            </div>
            {% endif %}
        </div>

        <div class="price-info">
            {% if book.paper_book %}
            <div class="paper-book">
                Okładka {{book.paper_book.cover }}
                <p>{{book.paper_book.price }}</p>
                <i id="remove-icon" class="small material-icons" onclick="changeQuantityValue(-1)">remove</i>
                <input id="quantity" type="text" value="1" /> 
                <i id="add-icon" class="small material-icons" onclick="changeQuantityValue(1)">add</i>
                <a id="add-to-cart"
                    href="#"
                    onclick="addToCartFromInput(event)"
                    data-book-id="{{book.id}}" 
                    data-book-type="paper_book"
                    data-book-price="{{book.paper_book.price}}">
                    Dodaj do wózka
                </a>
            </div>
            {% endif %}
        </div>

        <div class="book-description">{{book.description}}</div>

    </div>
    
    <div class="">
        <h1>Inne książki tego autora</h1>
        
        {% for other_book in other_books %}

            <div class="other-book">
                <img class="other-cover" src="{{ other_book.cover_photo.url }}"/>
                
                    <p> {{other_book}}</p>
                    <p> {{other_book.paper_book.price}} </p>   
               
            </div>

            
        {% endfor %}
    </div>

{% endblock body %}


{% block javascript %}
<script type="text/javascript" src="{% static 'Store/js/quantityForm.js' %}" > </script> 
<script type="text/javascript" src="{% static 'Store/js/addToCart.js' %}" > </script> 

{% endblock javascript %}